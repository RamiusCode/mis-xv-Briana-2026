---
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üìÖ CALENDARIO AUTOM√ÅTICO - SOLO EDITA ESTAS 3 VARIABLES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// üéØ CONFIGURACI√ìN SIMPLE (SOLO EDITA ESTO)
const config = {
  mes: 1,                    // N√∫mero del mes (1=Enero, 2=Febrero, ..., 12=Diciembre)
  a√±o: 2026,                  // A√±o
  diaEspecial: 10,           // D√≠a marcado en el calendario
  
  // Colores (opcional personalizar)
  colores: {
    principal: "#D4AF37",     // Dorado
    texto: "#6B8E6B",         // Verde
    hover: "#D4AF37",         // Dorado para hover
  }
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ü§ñ C√ÅLCULOS AUTOM√ÅTICOS - NO EDITAR
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// Nombres de meses
const nombresMeses = [
  "Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
  "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"
];

// Obtener nombre del mes
const nombreMes = nombresMeses[config.mes - 1];

// Calcular autom√°ticamente el d√≠a de la semana del d√≠a 1
const fecha = new Date(config.a√±o, config.mes - 1, 1);
const primerDiaSemana = fecha.getDay(); // 0=Domingo, 1=Lunes, etc.

// Calcular total de d√≠as del mes
const ultimoDia = new Date(config.a√±o, config.mes, 0);
const totalDias = ultimoDia.getDate();

// Generar array de d√≠as vac√≠os antes del d√≠a 1
const diasVacios = Array(primerDiaSemana).fill(null);

// Generar array de d√≠as del mes
const diasMes = Array.from({ length: totalDias }, (_, i) => i + 1);

// Debug info (puedes eliminarlo despu√©s)
console.log(`üìÖ Calendario: ${nombreMes} ${config.a√±o}`);
console.log(`üìç D√≠a 1 cae en: ${['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'][primerDiaSemana]}`);
console.log(`üìä Total de d√≠as: ${totalDias}`);
console.log(`‚≠ê D√≠a especial: ${config.diaEspecial}`);
---

<section class="py-2 px-6 sm:px-8 md:px-12 lg:px-16">
  <div class="max-w-3xl mx-auto relative">
    
    <!-- CONTENEDOR DEL CALENDARIO -->
    <div class="max-w-sm sm:max-w-sm md:max-w-sm mx-auto px-4 relative">
      
      <!-- HOJAS LATERALES IZQUIERDA -->
      <div class="absolute -left-8 md:-left-8 lg:-left-8 top-24 md:top-8 w-16 md:w-16 lg:w-16 pointer-events-none z-0" id="hojas-cal-izq">
        <img src="/imagenes/FloresLaterales.webp" alt="Hojas" class="w-full h-auto object-contain" />
      </div>

      <!-- HOJAS LATERALES DERECHA -->
      <div class="absolute -right-8 md:-right-8 lg:-right-8 top-24 md:top-8 w-16 md:w-16 lg:w-16 pointer-events-none z-1" id="hojas-cal-der">
        <img src="/imagenes/FloresLaterales.webp" alt="Hojas" class="w-full h-auto object-contain transform -scale-x-100" />
      </div>

      <div class="bg-white rounded-3xl shadow-lg border-2 border-[#D4AF37] p-4 md:p-8 relative z-10" id="calendario-card">
        
        <!-- T√çTULO DEL MES CON DECORACI√ìN -->
        <div class="flex items-center justify-center gap-4 md:gap-6 mb-6" id="titulo-mes-container">
          <!-- L√≠nea decorativa izquierda -->
          <div class="w-12 h-px bg-gradient-to-r from-transparent to-[#D4AF37]" id="linea-izq"></div>

          <!-- T√≠tulo con mes y a√±o -->
          <h3 class="font-great-vibes text-4xl md:text-4xl text-[#D4AF37] font-normal">
            {nombreMes}
          </h3>

          <!-- L√≠nea decorativa derecha -->
          <div class="w-12 h-px bg-gradient-to-l from-transparent to-[#D4AF37]" id="linea-der"></div>
        </div>

        <!-- D√çAS DE LA SEMANA -->
        <div class="grid grid-cols-7 gap-1 md:gap-2 mb-3">
          <div class="text-center font-charm text-sm md:text-base text-[#6B8E6B] font-bold">D</div>
          <div class="text-center font-charm text-sm md:text-base text-[#6B8E6B] font-bold">L</div>
          <div class="text-center font-charm text-sm md:text-base text-[#6B8E6B] font-bold">M</div>
          <div class="text-center font-charm text-sm md:text-base text-[#6B8E6B] font-bold">M</div>
          <div class="text-center font-charm text-sm md:text-base text-[#6B8E6B] font-bold">J</div>
          <div class="text-center font-charm text-sm md:text-base text-[#6B8E6B] font-bold">V</div>
          <div class="text-center font-charm text-sm md:text-base text-[#6B8E6B] font-bold">S</div>
        </div>

        <!-- D√çAS DEL MES - GENERADOS AUTOM√ÅTICAMENTE -->
        <div class="grid grid-cols-7 gap-1 md:gap-2" id="dias-container">
          
          <!-- Espacios vac√≠os antes del d√≠a 1 (calculados autom√°ticamente) -->
          {diasVacios.map(() => (
            <div></div>
          ))}
          
          <!-- D√≠as del mes -->
          {diasMes.map((dia) => (
            <div 
              class={`aspect-square flex items-center justify-center rounded-lg transition-all dia-calendario ${
                dia === config.diaEspecial 
                  ? 'bg-gradient-to-br from-[#D4AF37] to-[#e8c878] shadow-xl' 
                  : 'hover:bg-[#D4AF37]/10'
              }`}
              id={dia === config.diaEspecial ? 'dia-especial' : ''}
            >
              <span class={`font-charm ${
                dia === config.diaEspecial 
                  ? 'text-2xl md:text-3xl text-white font-bold' 
                  : 'text-base md:text-lg text-[#6B8E6B]'
              }`}>
                {dia}
              </span>
            </div>
          ))}
          
        </div>

      </div>
    </div>
  </div>
</section>

<style>
  #dia-especial {
    box-shadow: 0 6px 20px rgba(212, 175, 55, 0.6);
    position: relative;
  }

  #dia-especial::after {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 0.5rem;
    border: 2px solid rgba(255, 255, 255, 0.3);
    pointer-events: none;
  }

  .dia-calendario:hover {
    transform: translateY(-2px);
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  if (typeof window !== 'undefined') {
    document.addEventListener("DOMContentLoaded", () => {
      console.log("üìÖ Iniciando animaciones del calendario...");

      // Estados iniciales
      gsap.set("#hojas-cal-izq", { opacity: 0, x: 60 });
      gsap.set("#hojas-cal-der", { opacity: 0, x: -60 });
      gsap.set("#calendario-card", { opacity: 0, scale: 0.95 });
      gsap.set("#linea-izq", { opacity: 0, scaleX: 0 });
      gsap.set("#linea-der", { opacity: 0, scaleX: 0 });
      gsap.set("#titulo-mes-container h3", { opacity: 0, scale: 0.9 });
      gsap.set(".dia-calendario", { opacity: 0, scale: 0.8 });

      // ScrollTrigger para animaciones
      ScrollTrigger.create({
        trigger: "#calendario-card",
        start: "top 85%",
        end: "top 20%",
        onEnter: () => animarCalendario(),
        onLeaveBack: () => ocultarCalendario(),
      });

      function animarCalendario() {
        const tl = gsap.timeline();

        tl.to("#calendario-card", {
          opacity: 1,
          scale: 1,
          duration: 0.8,
          ease: "back.out(1.3)",
        })
        .to("#linea-izq, #linea-der", {
          opacity: 1,
          scaleX: 1,
          duration: 0.6,
          ease: "power2.out",
        }, "-=0.4")
        .to("#titulo-mes-container h3", {
          opacity: 1,
          scale: 1,
          duration: 0.6,
          ease: "back.out(1.3)",
        }, "-=0.4")
        .to(".dia-calendario", {
          opacity: 1,
          scale: 1,
          duration: 0.4,
          stagger: 0.02,
          ease: "back.out(1.2)",
        }, "-=0.3")
        .to("#hojas-cal-izq, #hojas-cal-der", {
          opacity: 0.6,
          x: 0,
          duration: 0.8,
          ease: "power2.out",
        }, "-=0.6");
      }

      function ocultarCalendario() {
        gsap.set("#hojas-cal-izq", { opacity: 0, x: 60 });
        gsap.set("#hojas-cal-der", { opacity: 0, x: -60 });
        gsap.set("#calendario-card", { opacity: 0, scale: 0.95 });
        gsap.set("#linea-izq", { opacity: 0, scaleX: 0 });
        gsap.set("#linea-der", { opacity: 0, scaleX: 0 });
        gsap.set("#titulo-mes-container h3", { opacity: 0, scale: 0.9 });
        gsap.set(".dia-calendario", { opacity: 0, scale: 0.8 });
      }

      // Animaciones continuas
      gsap.to("#hojas-cal-izq", {
        y: -8,
        rotation: -3,
        duration: 3,
        ease: "sine.inOut",
        yoyo: true,
        repeat: -1,
        delay: 1,
      });

      gsap.to("#hojas-cal-der", {
        y: -8,
        rotation: 3,
        duration: 3,
        ease: "sine.inOut",
        yoyo: true,
        repeat: -1,
        delay: 1.2,
      });

      const diaEspecial = document.getElementById("dia-especial");
      if (diaEspecial) {
        gsap.to("#dia-especial", {
          scale: 1.05,
          duration: 2.5,
          ease: "sine.inOut",
          yoyo: true,
          repeat: -1,
          delay: 1.5,
        });
      }

      console.log("üìÖ‚ú® ¬°Calendario listo!");
    });
  }
</script>