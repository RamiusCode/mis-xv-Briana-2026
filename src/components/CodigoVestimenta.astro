---
// CodigoVestimenta.astro
// Tem√°tica La Princesa y el Sapo
// Colores: Dorado #D4AF37 y Verde #6B8E6B
---

<section class="py-4 px-4">
  <div class="max-w-xl mx-auto text-center">
   
    <!-- üå∏ SEPARADOR SUPERIOR -->
    <div class="flex justify-center mb-6" id="separador-superior">
      <img
        src="/imagenes/SeparadorDos.webp"
        alt="Separador decorativo"
        class="w-40 md:w-40 lg:w-40 h-auto object-contain"
      />
    </div>
    
    <!-- T√çTULO CON COCODRILOS A LOS LADOS -->
    <div class="mb-4 flex items-center justify-center gap-1 md:gap-1" id="titulo-vestimenta">
      <!-- üêä Cocodrilo Izquierdo -->
      <img
        src="/imagenes/IconoCocodrilo.webp"
        alt="Cocodrilo decorativo"
        class="w-16 h-16 md:w-16 md:h-16 lg:w-16 lg:h-16 object-contain"
        id="cocodrilo-izq"
      />
      
      <!-- T√≠tulo -->
      <h2 class="font-charm text-2xl md:text-2xl lg:text-2xl text-[#D4AF37] font-bold ">
        C√ìDIGO DE VESTIMENTA
      </h2>
      
      <!-- üêä Cocodrilo Derecho -->
      <img
        src="/imagenes/IconoCocodriloDerecho.webp"
        alt="Cocodrilo decorativo"
        class="w-16 h-16 md:w-16 md:h-16 lg:w-16 lg:h-16 object-contain"
        id="cocodrilo-der"
      />
    </div>
    
    <!-- üëî IMAGEN VESTIMENTA -->
    <div class="flex justify-center mb-4" id="imagen-vestimenta">
      <img
        src="/imagenes/CodigoVestimentaVerde.webp"
        alt="C√≥digo de vestimenta"
        class="w-20 h-auto md:w-20 lg:w-20 object-contain"
      />
    </div>
    
    <!-- DESCRIPCI√ìN -->
    <div class="mb-3" id="descripcion-vestimenta">
      <p class="font-charm text-2xl md:text-2xl text-[#6B8E6B] font-bold leading-relaxed">
        Guapos y Divinas
      </p>
    </div>
    
    <!-- NOTA IMPORTANTE -->
    <div class="mb-2" id="nota-vestimenta">
      <p class="font-charm text-xl md:text-xl text-[#D4AF37] leading-relaxed">
        Color verde reservado para la quincea√±era
      </p>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
 
  gsap.registerPlugin(ScrollTrigger);
 
  if (typeof window !== "undefined") {
    document.addEventListener("DOMContentLoaded", () => {
      console.log("üëî Iniciando animaciones de C√≥digo de Vestimenta...");
      
      // üéØ ESTADO INICIAL - Todo oculto
      gsap.set("#separador-superior", { opacity: 0, scale: 0.8 });
      gsap.set("#titulo-vestimenta", { opacity: 0, y: 30 });
      gsap.set("#cocodrilo-izq", { x: -30, rotation: -15 });
      gsap.set("#cocodrilo-der", { x: 30, rotation: 15 });
      gsap.set("#imagen-vestimenta", { opacity: 0, scale: 0.8 });
      gsap.set("#descripcion-vestimenta", { opacity: 0, scale: 0.9 });
      gsap.set("#nota-vestimenta", { opacity: 0, scale: 0.9 });
     
      // ‚ú® ANIMACI√ìN SIMULT√ÅNEA CON SCROLLTRIGGER
      ScrollTrigger.create({
        trigger: "#separador-superior",
        start: "top 85%",
        end: "top 20%",
        
        onEnter: () => {
          console.log("‚ú® C√≥digo de vestimenta apareciendo...");
          animarEntrada();
        },
        
        onLeaveBack: () => {
          console.log("üëã Ocultando c√≥digo de vestimenta...");
          animarSalida();
        },
      });
      
      // üé¨ ANIMACI√ìN DE ENTRADA SIMULT√ÅNEA
      function animarEntrada() {
        const tl = gsap.timeline();
        
        // TODO aparece al mismo tiempo
        tl.to("#separador-superior, #titulo-vestimenta, #imagen-vestimenta, #descripcion-vestimenta, #nota-vestimenta", {
          opacity: 1,
          duration: 1.2,
          ease: "power2.out",
        })
        // Animaciones individuales (simult√°neas)
        .to("#separador-superior", {
          scale: 1,
          duration: 1.2,
          ease: "back.out(1.5)",
        }, "<")
        .to("#titulo-vestimenta", {
          y: 0,
          duration: 1.2,
          ease: "power3.out",
        }, "<")
        .to("#cocodrilo-izq", {
          x: 0,
          rotation: 0,
          duration: 1.2,
          ease: "back.out(1.5)",
        }, "<")
        .to("#cocodrilo-der", {
          x: 0,
          rotation: 0,
          duration: 1.2,
          ease: "back.out(1.5)",
        }, "<")
        .to("#imagen-vestimenta", {
          scale: 1,
          duration: 1.2,
          ease: "back.out(1.5)",
        }, "<")
        .to("#descripcion-vestimenta, #nota-vestimenta", {
          scale: 1,
          duration: 1.2,
          ease: "back.out(1.2)",
        }, "<");
      }
      
      // üîô ANIMACI√ìN DE SALIDA SIMULT√ÅNEA
      function animarSalida() {
        const tl = gsap.timeline();
        
        tl.to("#separador-superior, #titulo-vestimenta, #imagen-vestimenta, #descripcion-vestimenta, #nota-vestimenta", {
          opacity: 0,
          duration: 0.6,
          ease: "power2.in",
        })
        .to("#separador-superior", {
          scale: 0.8,
          duration: 0.6,
          ease: "power2.in",
        }, "<")
        .to("#titulo-vestimenta", {
          y: 30,
          duration: 0.6,
          ease: "power2.in",
        }, "<")
        .to("#cocodrilo-izq", {
          x: -30,
          rotation: -15,
          duration: 0.6,
          ease: "power2.in",
        }, "<")
        .to("#cocodrilo-der", {
          x: 30,
          rotation: 15,
          duration: 0.6,
          ease: "power2.in",
        }, "<")
        .to("#imagen-vestimenta", {
          scale: 0.8,
          duration: 0.6,
          ease: "power2.in",
        }, "<")
        .to("#descripcion-vestimenta, #nota-vestimenta", {
          scale: 0.9,
          duration: 0.6,
          ease: "power2.in",
        }, "<");
      }
      
      console.log("üëî Secci√≥n de C√≥digo de Vestimenta inicializada");
    });
  }
</script>